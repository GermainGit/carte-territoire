
<div id="notice"><%= notice %></div>


<div id="mapid"></div>
<div class="container">
  <div class="row">

    <% @photos.each do |photo| %>
    <div class="col-lg-6 resize_photo">
        <a href="photos/<%= photo.id %>"><img src="<%=  photo.file %>"></a>

  <div class="content">
   <h3><%= photo.title %></h3>
        <p><%= photo.content %></p></div>
      </div>
    <% end %>
    </div>
</div>
<br>
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
   integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
   crossorigin=""></script>

<script>
  var map = new L.Map('mapid').setView([44.84561111, -0.58027778], 6);

 L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}', {
    attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
    maxZoom: 18,
    minZoom: 10,
    ext: 'png'
 }).addTo(map);
 map.attributionControl.setPrefix('');

var southWest = L.latLng(42.58155760646617, -0.90),
northEast = L.latLng(46.99346179538875, -0.02);
var bounds = L.latLngBounds(southWest, northEast);

map.setMaxBounds(bounds);
map.on('drag', function(){
  map.panInsideBounds(bounds, { animate: true});
});

 // Define an array. This could be done in a seperate js file.
 // This tidy formatted section could even be generated by a server-side script
 // or fetched seperately as a jsonp request.



<% @photos.each do |photo| %>
    var long = <%= photo.long %>;
    var lat = <%= photo.lat %>;
    var popupText = "<%= photo.title %>";
    var icon = L.icon({
      iconUrl: '<%= photo.file %>',
      iconSize: [45, 45]
    });
    var markerLocation = new L.LatLng(lat, long);
    var marker = new L.Marker(markerLocation, {icon: icon});
    map.addLayer(marker);

    marker.bindPopup(popupText);

<% end %>

</script>
<%= link_to 'Nouvelle photo', new_photo_path %>
